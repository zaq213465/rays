$(function(){Metronic.init();Layout.init();QuickSidebar.init();Demo.init();$(".date-picker").datepicker({rtl:Metronic.isRTL(),orientation:"left",autoclose:true});$("#cancle").click(function(){history.go(-1)});$.validator.addMethod("isMobile",function(m,j){var l=m.length;var i=/^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/;return this.optional(j)||(l==11&&i.test(m))},"请正确填写您的手机号码");$.validator.addMethod("isLegalCard",function(l,j){var i=/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/;return this.optional(j)||(i.test(l))},"身份证格式错误");function e(){var j=$("#payCode").val();var l=$("#id").val();var i=false;$.ajax({url:"check",data:{payCode:j,id:l},type:"POST",async:false,success:function(m){m=$.parseJSON(m);i=m.check}});return i}$("#form").validate({event:"blur",rules:{payCode:{required:true,maxlength:25},joinUserPublicKey:{required:true,maxlength:4096},joinPublicKey:{required:true,maxlength:4096},joinPrivateKey:{required:true,maxlength:4096},joinKey:{required:true,maxlength:25}},messages:{payCode:{required:"请输入【华付通道编号】",maxlength:"长度不能超过25"},joinUserPublicKey:{required:"请输入【用户上传公钥】",maxlength:"长度不能超过4096"},joinPublicKey:{required:"请输入【平台公钥】",maxlength:"长度不能超过4096"},joinPrivateKey:{required:"请输入【平台私钥】",maxlength:"长度不能超过4096"},joinKey:{required:"请输入【接入加解密KEY】",maxlength:"长度不能超过25"}},submitHandler:function(n){var i=0;var m="";if(e()!=true){i++;m+="该通道编号已存在"}if(i==0){$("#save").attr("disabled","disabled");var l=$("#baseUrl").text().trim();var j=$("#form").serialize();$.ajax({url:l+"/adminManage/platformsecretkey/save",data:j,type:"POST",success:function(o){o=$.parseJSON(o);bootbox.alert(o.values,function(){if(o.executeStatus=="0"){location.href=l+o.url}})}})}else{bootbox.alert(m,function(){})}return false},errorPlacement:function(i,j){i.appendTo(j.parent().parent())}});var k=$("select.form-control");for(var g=0;g<k.size();g++){var h=$(k[g]);var a=h.attr("id");var c=$("."+a).val();var b=h.find("option");for(var f=0;f<b.size();f++){var d=$(b[f]).val();if(d==c){$(b[f]).attr("selected","selected")}else{$(b[f]).removeClass("selected")}}}});