var baseUrl=$("#baseUrl").text().trim();$(function(){$("#cancle1").on("click",function(){$("div.bootbox,div.modal-backdrop").fadeOut(function(){$(this).remove()})});$(".allApis span").on("click",h);$(".ownApis span").on("click",a);var c=$(".ownApis span");var b=",";for(var d=0;d<c.size();d++){var f=$(c[d]);var g=f.attr("value").trim();b+=g+","}var c=$(".allApis span");for(var d=0;d<c.size();d++){var f=$(c[d]);var e=f.attr("value").trim();if(b.indexOf(","+e+",")>-1){f.remove()}}function h(){var m=$(this).attr("value").trim();var l=",";var p=$(".ownApis span");for(var j=0;j<p.size();j++){var n=$(p[j]);var o=n.attr("value").trim();l+=o+","}if(l.indexOf(","+m+",")<0||l==""){var k=$(this).clone();k.bind("click",a);$(".ownApis").append(k);$(this).remove()}else{bootbox.alert("已选二维码中已存在此二维码，请选择其他二维码!",function(){})}}function a(){var i=$(this).clone();i.bind("click",h);$(".allApis").append(i);$(this).remove()}$("#save1").on("click",function(){var q=$(".allApis .ownApi");for(var l=0;l<q.size();l++){var o=$(q[l]);var p=o.attr("val");delapi(p)}q=$(".ownApis span");var m="";for(var l=0;l<q.size();l++){var o=$(q[l]);var p=o.attr("value");if(m.indexOf(p)<0){m+=p;if(l<q.size()-1){m+=","}}}var j=$("#storeNo1").val();var k=$("#cashierNo1").val();var n=$("#merchantNo1").val();$.ajax({type:"POST",url:baseUrl+"/adminManage/merchantcashierqr/save",data:{ids:m,storeNo:j,cashierNo:k,merchantNo:n},async:false,success:function(i){i=$.parseJSON(i);bootbox.alert(i.values,function(){if(i.executeStatus==0){window.location.reload()}})}})})});function delapi(a){$.ajax({type:"POST",url:baseUrl+"/adminManage/merchantcashierqr/del",data:{qrCode:a},async:false,success:function(b){b=$.parseJSON(b);bootbox.alert(b.values,function(){if(b.executeStatus==0){window.location.reload()}})}})};