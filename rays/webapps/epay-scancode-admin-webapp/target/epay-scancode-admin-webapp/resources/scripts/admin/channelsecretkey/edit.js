$(function(){Metronic.init();Layout.init();QuickSidebar.init();Demo.init();$(".date-picker").datepicker({rtl:Metronic.isRTL(),orientation:"left",autoclose:true});$("#companyName").change(function(i){var j=$("#companyName").find("option:selected").attr("channelNo");$("#form").find("#channelNo").val(j)});$("#payName").change(function(j){var i=$("#payName").find("option:selected").attr("payCode");$("#form").find("#payCode").val(i)});function e(){var j=$("#companyName").find("option:selected").attr("channelNo");var l=$("#id").val();var i=false;$.ajax({url:"check",data:{channelNo:j,id:l},type:"POST",async:false,success:function(m){m=$.parseJSON(m);i=m.check}});return i}$("#cancle").click(function(){history.go(-1)});$("#form").validate({event:"submit",rules:{companyName:{required:true,maxlength:25},boundIp:{maxlength:100},joinUserPublicKey:{required:true},joinPublicKey:{required:true},joinPrivateKey:{required:true}},messages:{companyName:{required:"请选择【渠道名称】",maxlength:"长度不能超过25"},boundIp:{maxlength:"长度不能超过100"},joinUserPublicKey:{required:"请输入【用户上传公钥】"},joinPublicKey:{required:"请输入【平台公钥】"},joinPrivateKey:{required:"请输入【平台私钥】"}},submitHandler:function(n){var i=0;var m="";$("#companyName").removeAttr("disabled");if(e()!=true){i++;m+="该渠道下已设置秘钥信息！"}if(i==0){var l=$("#baseUrl").text().trim();var j=$("#form").serialize();$.ajax({url:l+"/adminManage/channelsecretkey/save",data:j,type:"POST",success:function(o){o=$.parseJSON(o);bootbox.alert(o.values,function(){if(o.executeStatus=="0"){location.href=l+o.url}})}})}else{bootbox.alert(m,function(){})}return false},errorPlacement:function(i,j){i.appendTo(j.parent().parent())}});var k=$("select.form-control");for(var g=0;g<k.size();g++){var h=$(k[g]);var a=h.attr("id");var c=$("."+a).val();var b=h.find("option");for(var f=0;f<b.size();f++){var d=$(b[f]).val();if(d==c){$(b[f]).attr("selected","selected")}else{$(b[f]).removeClass("selected")}}}});