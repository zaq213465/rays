$(function(){Metronic.init();Layout.init();QuickSidebar.init();Demo.init();$(".date-picker").datepicker({format:"yyyy-mm-dd ",weekStart:0,autoclose:true,todayHighlight:true,defaultDate:new Date(),keyboardNavigation:true,todayBtn:"linked",clearBtn:"linked",language:"zh-CN"});$("#form").find("#cancle").click(function(){var a=$("#baseUrl").text().trim();window.location.href=a+"/adminManage/platfrompassageconfig"});$("#passageNo").blur(function(){var e=$(this);var b=e.attr("id");var d=$("#baseUrl").text().trim();if($("#"+b+"-error").text()==""){e.parent().parent().find("label:gt(0)").remove();var g=e.val();var f=e.attr("placeholder");var a=0;var c="";if(g==null||g==""){a++;c="为空"}if(a==0){$.ajax({type:"POST",url:d+"/adminManage/platfrompassageconfig/list",data:b+"="+g,async:false,success:function(j){j=$.parseJSON(j);if(j.objList.length>1){a++;c="已存在"}if(j.objList.length==1){var h=$("#id").val();if(h==null||h==""){a++;c="已存在"}else{var i=j.objList[0];if(h!=i.id){a++;c="已存在"}}}}})}if(a==0){e.parent().parent().append('<label id="'+b+'-success" class="success" for="'+b+'">'+f+"可用！</label>")}else{e.parent().parent().append('<label id="'+b+'-error" class="error" for="'+b+'">'+f+c+"，不可用！</label>")}}else{$("#"+b+"-success").remove()}});$.validator.addMethod("isNumOne",function(c,a){var b=/[^\d]/g;return this.optional(a)||(!b.test(c))},"只能输入数字");$("#form").validate({event:"submit",rules:{passageNo:{required:true},passageName:{required:true},isT0:{required:true},isT1:{required:true},merchantSynchronization:{required:true},status:{required:true}},messages:{passageNo:{required:"通道编号不能为空",},passageName:{required:"通道名称不能为空",},isT0:{required:"请选择支持或者不支持",},isT1:{required:"请选择支持或者不支持",},merchantSynchronization:{required:"请选择是或者否",},status:{required:"状态不能为空",}},submitHandler:function(e){var a=0;var d="";if(a==0){var c=$("#baseUrl").text().trim();var b=$("#form").serialize();$.ajax({url:c+"/adminManage/platfrompassageconfig/save",data:b,type:"POST",success:function(f){var f=JSON.parse(f);bootbox.alert(f.values,function(){if(f.executeStatus=="0"){location.href=c+f.url}})}})}else{bootbox.alert(d,function(){})}return false},errorPlacement:function(a,b){a.appendTo(b.parent().parent())}})});