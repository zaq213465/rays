$(function(){Metronic.init();Layout.init();QuickSidebar.init();Demo.init();$(".date-picker").datepicker({format:"yyyy-mm-dd",weekStart:0,autoclose:true,todayHighlight:true,defaultDate:new Date(),keyboardNavigation:true,todayBtn:"linked",clearBtn:"linked",language:"zh-CN"});$("#cancle").click(function(){$(".form-horizontal input").val("");$(".form-horizontal select").val("")});$("#query").click(function(){var d=$("#queryStartDate");var c=$("#queryEndDate");var a=d.val();var e=c.val();if((a!=""||a!=null)&&(e!=""||e!=null)){var f=new Date(a.replace("-","/").replace("-","/"));var b=new Date(e.replace("-","/").replace("-","/"));if(f>b){bootbox.alert("开始时间大于结束时间！");return}}toPage(1)});toPage(1);$(".export").click(function(){var a=$("#form").serialize();var b=$("#baseUrl").text().trim();$.ajax({url:b+"/adminManage/organwithdrawals/export/check?"+a,type:"GET",success:function(c){c=$.parseJSON(c);if(c.errorCode=="1"){bootbox.alert(c.errorMsg,function(){})}else{window.open(b+"/adminManage/organwithdrawals/export/excel?"+a)}}})});$("#add").on("click",function(){var b='<form class="form-horizontal"><div class="form-body row"><div class="form-group col-md-7"><label class="control-label col-md-4">提现金额</label><div class="col-md-8"><input type="text" class="form-control" id="balance" placeholder="提现金额"></div></div><div class="form-group col-md-7"><label class="control-label col-md-4">备注</label><div class="col-md-8"><input type="text" class="form-control" id="remark" placeholder="备注"></div></div></div></form>';var a={success:{label:"申请提现",className:"btn-success",callback:function(){var c="";var d=$("#balance").val().trim();var e=$("#remark").val().trim();if(d.length==""||!/^\d+(\.\d{2})?$/.test(d)){bootbox.alert("提现金额有误,只能保留两位小数！<br>",function(){});return}else{$.ajax({type:"POST",url:"organwithdrawals/addWithDraw",data:{remark:e,balance:d}}).done(function(f){f=$.parseJSON(f);if(f.errorCode=="0"){bootbox.alert("提现申请成功",function(){location.reload()})}else{bootbox.alert(f.errorMsg,function(){})}}).error(function(f){bootbox.alert("申请提现失败",function(){})})}}},"取消":{className:"btn-danger",callback:function(){}}};bootbox.dialog({message:b,title:"提现申请",onEscape:function(){},className:"green-haze",buttons:a})})});function toPage(b){var a=$("#form").serialize();$.ajax({type:"POST",url:"organwithdrawals/content?pageNo="+b,data:a,success:function(c){$("#tablec").html(c)}})};